{"version":3,"file":"js/977.9153e240.js","mappings":"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","sources":["webpack://pleasuretour/./src/page/self/YSelfHelp.vue","webpack://pleasuretour/src/page/self/YSelfHelp.vue","webpack://pleasuretour/./src/page/self/YSelfHelp.vue?b72a","webpack://pleasuretour/./src/page/self/YSelfHelp.vue?b544"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],attrs:{\"id\":\"selfHelp\",\"element-loading-background\":\"#f8f8f8\"}},[_c('el-row',[_c('el-row',[_c('h2',[_vm._v(\"个人信息修改\")]),_c('el-divider')],1),_c('el-row',{staticStyle:{\"margin-bottom\":\"20px\"}},[_c('el-col',[_c('div',{staticStyle:{\"margin-bottom\":\"10px\"}},[_vm._v(\"头像\")]),_c('el-upload',{staticStyle:{\"border-radius\":\"50%\"},attrs:{\"action\":\"#\",\"show-file-list\":false,\"auto-upload\":false,\"multiple\":false,\"on-change\":_vm.uploadFile,\"accept\":\"image/jpg,image/jpeg,image/png\"}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"点击上传\")]),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\" 只能上传jpg/png文件，且不超过500kb \")])],1)],1)],1),(_vm.imageUrl)?_c('el-divider'):_vm._e(),_c('el-row',[_c('el-col',[(_vm.imageUrl)?_c('i',{staticClass:\"el-icon-circle-close deleteImg\",on:{\"click\":function($event){$event.stopPropagation();return _vm.handleRemove.apply(null, arguments)}}}):_vm._e(),(_vm.imageUrl)?_c('el-image',{staticClass:\"el-upload--picture-car\",staticStyle:{\"width\":\"100px\",\"height\":\"100px\",\"margin\":\"10px 0\"},attrs:{\"src\":_vm.imageUrl,\"preview-src-list\":[_vm.imageUrl]}}):_vm._e()],1)],1)],1),(_vm.imageUrl)?_c('el-divider'):_vm._e(),_c('el-row',[_c('el-form',{ref:\"ruleForm\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.temp,\"rules\":_vm.rules,\"label-width\":\"50px\",\"label-position\":\"top\"}},[_c('el-form-item',{attrs:{\"label\":\"账号\",\"prop\":\"account\"}},[_c('el-input',{staticClass:\"el-input-plus\",attrs:{\"size\":\"mini\",\"clearable\":\"\"},model:{value:(_vm.temp.account),callback:function ($$v) {_vm.$set(_vm.temp, \"account\", $$v)},expression:\"temp.account\"}})],1),_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"password\"}},[_c('el-input',{staticClass:\"el-input-plus\",attrs:{\"size\":\"mini\",\"clearable\":\"\"},model:{value:(_vm.temp.password),callback:function ($$v) {_vm.$set(_vm.temp, \"password\", $$v)},expression:\"temp.password\"}})],1),_c('el-form-item',{attrs:{\"label\":\"电话\",\"prop\":\"phone\"}},[_c('el-input',{staticClass:\"el-input-plus\",attrs:{\"size\":\"mini\",\"clearable\":\"\"},model:{value:(_vm.temp.phone),callback:function ($$v) {_vm.$set(_vm.temp, \"phone\", $$v)},expression:\"temp.phone\"}})],1),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('el-input',{staticClass:\"el-input-plus\",attrs:{\"size\":\"mini\",\"clearable\":\"\"},model:{value:(_vm.temp.email),callback:function ($$v) {_vm.$set(_vm.temp, \"email\", $$v)},expression:\"temp.email\"}})],1),_c('el-form-item')],1)],1),_c('el-row',[_c('el-popconfirm',{attrs:{\"title\":\"确定要修改以下个人信息？\",\"confirm-button-text\":\"确认\",\"cancel-button-text\":\"取消\"},on:{\"confirm\":_vm.update}},[_c('el-button',{staticClass:\"el-icon-edit\",attrs:{\"slot\":\"reference\",\"size\":\"mini\",\"type\":\"primary\"},slot:\"reference\"},[_vm._v(\"修改\")])],1),_c('el-divider')],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"selfHelp\" v-loading=\"loading\" element-loading-background=\"#f8f8f8\">\r\n    <el-row>\r\n      <el-row>\r\n        <h2>个人信息修改</h2>\r\n        <el-divider></el-divider>\r\n      </el-row>\r\n      <el-row style=\"margin-bottom: 20px\">\r\n        <el-col>\r\n          <div style=\"margin-bottom: 10px\">头像</div>\r\n          <el-upload\r\n            action=\"#\"\r\n            :show-file-list=\"false\"\r\n            :auto-upload=\"false\"\r\n            :multiple=\"false\"\r\n            :on-change=\"uploadFile\"\r\n            accept=\"image/jpg,image/jpeg,image/png\"\r\n            style=\"border-radius: 50%\"\r\n          >\r\n            <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n            <div slot=\"tip\" class=\"el-upload__tip\">\r\n              只能上传jpg/png文件，且不超过500kb\r\n            </div>\r\n          </el-upload>\r\n        </el-col>\r\n      </el-row>\r\n      <el-divider v-if=\"imageUrl\"></el-divider>\r\n      <el-row>\r\n        <el-col>\r\n          <i\r\n            v-if=\"imageUrl\"\r\n            class=\"el-icon-circle-close deleteImg\"\r\n            @click.stop=\"handleRemove\"\r\n          ></i>\r\n          <el-image\r\n            v-if=\"imageUrl\"\r\n            :src=\"imageUrl\"\r\n            class=\"el-upload--picture-car\"\r\n            :preview-src-list=\"[imageUrl]\"\r\n            style=\"width: 100px; height: 100px; margin: 10px 0\"\r\n          />\r\n        </el-col>\r\n      </el-row>\r\n    </el-row>\r\n    <el-divider v-if=\"imageUrl\"></el-divider>\r\n    <el-row>\r\n      <el-form\r\n        :model=\"temp\"\r\n        :rules=\"rules\"\r\n        ref=\"ruleForm\"\r\n        label-width=\"50px\"\r\n        label-position=\"top\"\r\n        class=\"demo-ruleForm\"\r\n      >\r\n        <el-form-item label=\"账号\" prop=\"account\">\r\n          <el-input\r\n            size=\"mini\"\r\n            v-model=\"temp.account\"\r\n            clearable\r\n            class=\"el-input-plus\"\r\n          >\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"密码\" prop=\"password\">\r\n          <el-input\r\n            size=\"mini\"\r\n            v-model=\"temp.password\"\r\n            clearable\r\n            class=\"el-input-plus\"\r\n          >\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"电话\" prop=\"phone\">\r\n          <el-input\r\n            size=\"mini\"\r\n            v-model=\"temp.phone\"\r\n            clearable\r\n            class=\"el-input-plus\"\r\n          >\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"邮箱\" prop=\"email\">\r\n          <el-input\r\n            size=\"mini\"\r\n            v-model=\"temp.email\"\r\n            clearable\r\n            class=\"el-input-plus\"\r\n          >\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item> </el-form-item>\r\n      </el-form>\r\n    </el-row>\r\n    <el-row>\r\n      <el-popconfirm\r\n        title=\"确定要修改以下个人信息？\"\r\n        confirm-button-text=\"确认\"\r\n        cancel-button-text=\"取消\"\r\n        @confirm=\"update\"\r\n      >\r\n        <el-button\r\n          slot=\"reference\"\r\n          class=\"el-icon-edit\"\r\n          size=\"mini\"\r\n          type=\"primary\"\r\n          >修改</el-button\r\n        >\r\n      </el-popconfirm>\r\n      <el-divider></el-divider>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions } from \"vuex\";\r\nexport default {\r\n  name: \"YSelfHelp\",\r\n  data() {\r\n    return {\r\n      loading: true,\r\n      temp: {\r\n        account: \"\",\r\n        password: \"\",\r\n        phone: \"\",\r\n        email: \"\",\r\n        image: \"\",\r\n      },\r\n      rules: {\r\n        account: [\r\n          {\r\n            pattern: /^[A-Za-z0-9\\u4e00-\\u9fa5]{6,10}$/,\r\n            message: \"6到10位的数字、大小写字母、中文\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        password: [\r\n          {\r\n            pattern: /^[A-Za-z0-9]{6,12}$/,\r\n            message: \"6到12位的数字、大小写字母\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        phone: [\r\n          {\r\n            pattern:\r\n              /^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\\d{8}$/,\r\n            message: \"电话号码格式不符\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n        email: [\r\n          {\r\n            type: \"email\",\r\n            message: \"电子邮箱格式不符\",\r\n            trigger: \"blur\",\r\n          },\r\n        ],\r\n      },\r\n      imageUrl: \"\",\r\n    };\r\n  },\r\n  methods: {\r\n    ...mapActions(\"user\", { updateUserInfo: \"updateUserInfo\" }),\r\n    ...mapActions(\"login\", { getInfo: \"getInfo\" }),\r\n    uploadFile(item) {\r\n      this.temp.image = item.raw; // 图片文件\r\n      if (window.createObjectURL != undefined) {\r\n        // 图片上传浏览器回显地址\r\n        // basic\r\n        this.imageUrl = window.createObjectURL(item.raw);\r\n      } else if (window.URL != undefined) {\r\n        // mozilla(firefox)\r\n        this.imageUrl = window.URL.createObjectURL(item.raw);\r\n      } else if (window.webkitURL != undefined) {\r\n        // webkit or chrome\r\n        this.imageUrl = window.webkitURL.createObjectURL(item.raw);\r\n      }\r\n      console.log(this.imageUrl, \"imageUrl\");\r\n    },\r\n    handleRemove() {\r\n      this.imageUrl = \"\";\r\n    },\r\n    update() {\r\n      this.$refs[\"ruleForm\"].validate((valid) => {\r\n        if (valid) {\r\n          let formData = new FormData();\r\n          formData.append(\"usrId\", this.$store.state.user.userForm.usrId);\r\n          formData.append(\"usrAccount\", this.temp.account);\r\n          formData.append(\"usrPwd\", this.temp.password);\r\n          formData.append(\"usrEmail\", this.temp.email);\r\n          formData.append(\"usrPhone\", this.temp.phone);\r\n          formData.append(\"avatar\", this.temp.image);\r\n          const data = {\r\n            _this: this,\r\n            data: formData,\r\n          };\r\n          this.updateUserInfo(data);\r\n        } else {\r\n          this.$message({\r\n            message: \"请检查输入项是否符合要求\",\r\n            type: \"warning\",\r\n          });\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n  },\r\n  activated() {\r\n    this.getInfo(this);\r\n    console.log(\"activated\");\r\n    setTimeout(() => {\r\n      this.loading = false;\r\n    }, 1000);\r\n  },\r\n  deactivated() {\r\n    console.log(\"deactivated\");\r\n    this.loading = true;\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n#selfHelp {\r\n  padding: 30px 25px;\r\n}\r\np {\r\n  margin: 5px 0;\r\n  font-size: 12px;\r\n}\r\n.el-input-plus {\r\n  margin: 2px 0;\r\n  max-width: 300px;\r\n}\r\n.deleteImg {\r\n  font-size: 30px;\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0px;\r\n  z-index: 999;\r\n  transition: all 0.3s;\r\n}\r\n.deleteImg:hover {\r\n  color: #7e7b7b;\r\n}\r\nimg {\r\n  width: 100%;\r\n  height: 100%;\r\n  background-repeat: no-repeat;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./YSelfHelp.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./YSelfHelp.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./YSelfHelp.vue?vue&type=template&id=4d89472a&scoped=true&\"\nimport script from \"./YSelfHelp.vue?vue&type=script&lang=js&\"\nexport * from \"./YSelfHelp.vue?vue&type=script&lang=js&\"\nimport style0 from \"./YSelfHelp.vue?vue&type=style&index=0&id=4d89472a&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4d89472a\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","directives","name","rawName","value","loading","expression","attrs","_v","staticStyle","uploadFile","staticClass","slot","imageUrl","_e","on","$event","stopPropagation","handleRemove","apply","arguments","ref","temp","rules","model","account","callback","$$v","$set","password","phone","email","update","staticRenderFns","data","image","pattern","message","trigger","type","methods","mapActions","updateUserInfo","getInfo","item","raw","undefined","window","createObjectURL","URL","webkitURL","console","log","$refs","validate","valid","$message","formData","FormData","append","$store","state","user","userForm","usrId","_this","activated","setTimeout","deactivated","component"],"sourceRoot":""}